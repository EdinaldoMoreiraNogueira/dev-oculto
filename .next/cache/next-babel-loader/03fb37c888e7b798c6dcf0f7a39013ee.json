{"ast":null,"code":"import _regeneratorRuntime from \"/home/acer/Diversos/devweek/dev-oculto/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/acer/Diversos/devweek/dev-oculto/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/acer/Diversos/devweek/dev-oculto/src/components/Participants.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useRouter } from 'next/router';\nimport styled from 'styled-components';\nimport { RiDeleteBin2Fill } from \"react-icons/ri\";\nvar H4 = styled.h4.withConfig({\n  displayName: \"Participants__H4\",\n  componentId: \"sc-1d35l0n-0\"\n})([\"text-align:center;\"]);\n_c = H4;\nvar Container = styled.div.withConfig({\n  displayName: \"Participants__Container\",\n  componentId: \"sc-1d35l0n-1\"\n})([\"display:flex;padding:5px 20px;justify-content:center;align-items:center;flex-direction:column;\"]);\n_c2 = Container;\nvar ParticipantDiv = styled.div.withConfig({\n  displayName: \"Participants__ParticipantDiv\",\n  componentId: \"sc-1d35l0n-2\"\n})([\"display:flex;align-items:center;\"]);\n_c3 = ParticipantDiv;\nvar ParticipantDelete = styled.span.withConfig({\n  displayName: \"Participants__ParticipantDelete\",\n  componentId: \"sc-1d35l0n-3\"\n})([\"color:\", \";cursor:pointer;\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.colors.primary;\n});\n_c4 = ParticipantDelete;\n\nvar Participant = function Participant(_ref2) {\n  var name = _ref2.name,\n      email = _ref2.email,\n      showButton = _ref2.showButton,\n      deleteParticipant = _ref2.deleteParticipant;\n  return /*#__PURE__*/_jsxDEV(ParticipantDiv, {\n    children: [showButton && /*#__PURE__*/_jsxDEV(ParticipantDelete, {\n      onClick: deleteParticipant,\n      children: /*#__PURE__*/_jsxDEV(RiDeleteBin2Fill, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 54\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, _this), name, \" (\", email, \")\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 3\n  }, _this);\n};\n\n_c5 = Participant;\nexport default function Participants(_ref3) {\n  _s();\n\n  var _this2 = this;\n\n  var showButton = _ref3.showButton,\n      participants = _ref3.participants,\n      setParticipants = _ref3.setParticipants;\n  var router = useRouter();\n  var _router$query = router.query,\n      id = _router$query.id,\n      adminKey = _router$query.adminKey;\n\n  var deleteAPIParticipant = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(participantId) {\n      var NEXT_PUBLIC_API_URL;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              NEXT_PUBLIC_API_URL = process.env.NEXT_PUBLIC_API_URL;\n              _context.next = 3;\n              return fetch(\"\".concat(NEXT_PUBLIC_API_URL, \"/secrets/\").concat(id, \"/participants/\").concat(participantId), {\n                method: 'DELETE',\n                headers: new Headers({\n                  'admin-key': adminKey\n                })\n              });\n\n            case 3:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function deleteAPIParticipant(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var _deleteParticipant = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      var _yield$deleteAPIParti, status;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return deleteAPIParticipant(id);\n\n            case 2:\n              _yield$deleteAPIParti = _context2.sent;\n              status = _yield$deleteAPIParti.status;\n              if (status === 204) setParticipants(participants.filter(function (_ref6) {\n                var externalId = _ref6.externalId;\n                return externalId !== id;\n              }));\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function deleteParticipant(_x2) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(H4, {\n      children: \"Participantes: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [participants.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Nenhum participante cadastrado ainda.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 40\n      }, this), participants.map(function (_ref7, key) {\n        var name = _ref7.name,\n            email = _ref7.email,\n            externalId = _ref7.externalId;\n        return /*#__PURE__*/_jsxDEV(Participant, {\n          name: name,\n          email: email,\n          showButton: showButton,\n          deleteParticipant: function deleteParticipant() {\n            return _deleteParticipant(externalId);\n          }\n        }, \"participant-\".concat(key), false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 20\n        }, _this2);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Participants, \"fN7XvhJ+p5oE6+Xlo0NJmXpxjC8=\", false, function () {\n  return [useRouter];\n});\n\n_c6 = Participants;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"H4\");\n$RefreshReg$(_c2, \"Container\");\n$RefreshReg$(_c3, \"ParticipantDiv\");\n$RefreshReg$(_c4, \"ParticipantDelete\");\n$RefreshReg$(_c5, \"Participant\");\n$RefreshReg$(_c6, \"Participants\");","map":{"version":3,"sources":["/home/acer/Diversos/devweek/dev-oculto/src/components/Participants.js"],"names":["useRouter","styled","RiDeleteBin2Fill","H4","h4","Container","div","ParticipantDiv","ParticipantDelete","span","theme","colors","primary","Participant","name","email","showButton","deleteParticipant","Participants","participants","setParticipants","router","query","id","adminKey","deleteAPIParticipant","participantId","NEXT_PUBLIC_API_URL","process","env","fetch","method","headers","Headers","status","filter","externalId","length","map","key"],"mappings":"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","sourcesContent":["import { useRouter } from 'next/router'\nimport styled from 'styled-components'\nimport { RiDeleteBin2Fill } from \"react-icons/ri\"\n\nconst H4 = styled.h4`\n  text-align: center;\n`\n\nconst Container = styled.div`\n  display: flex;\n  padding: 5px 20px;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`\n\nconst ParticipantDiv = styled.div`\n  display: flex;\n  align-items: center;\n`\nconst ParticipantDelete = styled.span`\n  color: ${({ theme }) => theme.colors.primary};\n  cursor: pointer;\n`\n\nconst Participant = ({name, email, showButton, deleteParticipant}) => (\n  <ParticipantDiv>\n    {\n      showButton && \n      <ParticipantDelete onClick={deleteParticipant}><RiDeleteBin2Fill /></ParticipantDelete>\n    }\n    {name} ({email})\n  </ParticipantDiv>\n)\n\nexport default function Participants ({ showButton, participants, setParticipants }) {\n  const router = useRouter()\n  const { id, adminKey } = router.query\n\n  const deleteAPIParticipant = async (participantId) => {\n    const { NEXT_PUBLIC_API_URL } = process.env\n    return await fetch(`${NEXT_PUBLIC_API_URL}/secrets/${id}/participants/${participantId}`, {\n      method: 'DELETE',\n      headers: new Headers({\n        'admin-key': adminKey\n      })\n    })\n  }\n\n  const deleteParticipant = async (id) => {\n    const { status } = await deleteAPIParticipant(id)\n    if (status === 204)\n      setParticipants(participants.filter(({externalId}) => externalId !== id))\n  }\n  return (\n    <>\n      <H4>Participantes: </H4>\n      <Container>\n        {\n          participants.length === 0 && <p>Nenhum participante cadastrado ainda.</p>\n        }\n        {\n          participants.map(({name, email, externalId}, key) => {\n            return <Participant \n              key={`participant-${key}`}\n              name={name}\n              email={email}\n              showButton={showButton} \n              deleteParticipant={() => deleteParticipant(externalId)}\n            />\n          })\n        }\n      </Container>\n    </>\n  )\n}"]},"metadata":{},"sourceType":"module"}