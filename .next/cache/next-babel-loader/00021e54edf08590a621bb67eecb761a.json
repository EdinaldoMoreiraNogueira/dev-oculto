{"ast":null,"code":"import _regeneratorRuntime from \"/home/acer/Diversos/devweek/dev-oculto/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/acer/Diversos/devweek/dev-oculto/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/acer/Diversos/devweek/dev-oculto/src/components/Headers/SecretHeader.js\",\n    _s = $RefreshSig$();\n\nimport { useRouter } from 'next/router';\nimport styled from 'styled-components';\nimport ImageContainer from '../Containers/ImageContainer';\nimport Logo from '../Logo';\nimport NameEmailForm from '../NameEmailForm';\nvar Container = styled.div.withConfig({\n  displayName: \"SecretHeader__Container\",\n  componentId: \"sc-1oay8m0-0\"\n})([\"display:flex;flex-direction:column;align-items:center;justify-content:center;color:\", \";\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.colors.light;\n});\n_c = Container;\nvar DivForm = styled.div.withConfig({\n  displayName: \"SecretHeader__DivForm\",\n  componentId: \"sc-1oay8m0-1\"\n})([\"display:flex;flex-direction:row;align-items:center;justify-content:center;flex-shrink:0;\"]);\n_c2 = DivForm;\nexport default function SecretHeader(_ref2) {\n  _s();\n\n  var onAddParticipant = _ref2.onAddParticipant;\n  var router = useRouter();\n  var id = router.query.id;\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref3) {\n      var name, email, NEXT_PUBLIC_API_URL, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              name = _ref3.name, email = _ref3.email;\n              NEXT_PUBLIC_API_URL = process.env.NEXT_PUBLIC_API_URL;\n              _context.next = 4;\n              return fetch(\"\".concat(NEXT_PUBLIC_API_URL, \"/secrets/\").concat(id, \"/participants\"), {\n                method: 'POST',\n                body: JSON.stringify({\n                  name: name,\n                  email: email\n                })\n              });\n\n            case 4:\n              data = _context.sent;\n              _context.t0 = handleResponse;\n              _context.t1 = name;\n              _context.t2 = email;\n              _context.next = 10;\n              return data.json();\n\n            case 10:\n              _context.t3 = _context.sent;\n              _context.t4 = {\n                name: _context.t1,\n                email: _context.t2,\n                response: _context.t3\n              };\n              (0, _context.t0)(_context.t4);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleResponse = function handleResponse(_ref5) {\n    var name = _ref5.name,\n        email = _ref5.email,\n        response = _ref5.response;\n\n    if (response.success) {\n      onAddParticipant({\n        name: name,\n        email: email,\n        externalId: response.id\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(ImageContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Voc\\xEA foi convidado para participar deste amigo secreto de Fulano!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DivForm, {\n      children: /*#__PURE__*/_jsxDEV(NameEmailForm, {\n        buttonText: \"Participar\",\n        onSubmit: handleSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SecretHeader, \"fN7XvhJ+p5oE6+Xlo0NJmXpxjC8=\", false, function () {\n  return [useRouter];\n});\n\n_c3 = SecretHeader;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"DivForm\");\n$RefreshReg$(_c3, \"SecretHeader\");","map":{"version":3,"sources":["/home/acer/Diversos/devweek/dev-oculto/src/components/Headers/SecretHeader.js"],"names":["useRouter","styled","ImageContainer","Logo","NameEmailForm","Container","div","theme","colors","light","DivForm","SecretHeader","onAddParticipant","router","id","query","handleSubmit","name","email","NEXT_PUBLIC_API_URL","process","env","fetch","method","body","JSON","stringify","data","handleResponse","json","response","success","externalId"],"mappings":";;;;;;;AAAA,SAASA,SAAT,QAA0B,aAA1B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AAEA,IAAMC,SAAS,GAAGJ,MAAM,CAACK,GAAV;AAAA;AAAA;AAAA,iGAKJ;AAAA,MAAGC,KAAH,QAAGA,KAAH;AAAA,SAAeA,KAAK,CAACC,MAAN,CAAaC,KAA5B;AAAA,CALI,CAAf;KAAMJ,S;AAQN,IAAMK,OAAO,GAAGT,MAAM,CAACK,GAAV;AAAA;AAAA;AAAA,gGAAb;MAAMI,O;AAQN,eAAe,SAASC,YAAT,QAA6C;AAAA;;AAAA,MAApBC,gBAAoB,SAApBA,gBAAoB;AAC1D,MAAMC,MAAM,GAAGb,SAAS,EAAxB;AAD0D,MAElDc,EAFkD,GAE3CD,MAAM,CAACE,KAFoC,CAElDD,EAFkD;;AAI1D,MAAME,YAAY;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAQC,cAAAA,IAAR,SAAQA,IAAR,EAAcC,KAAd,SAAcA,KAAd;AACXC,cAAAA,mBADW,GACaC,OAAO,CAACC,GADrB,CACXF,mBADW;AAAA;AAAA,qBAEAG,KAAK,WAAIH,mBAAJ,sBAAmCL,EAAnC,oBAAsD;AAC5ES,gBAAAA,MAAM,EAAE,MADoE;AAE5EC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBT,kBAAAA,IAAI,EAAJA,IADmB;AAEnBC,kBAAAA,KAAK,EAALA;AAFmB,iBAAf;AAFsE,eAAtD,CAFL;;AAAA;AAEbS,cAAAA,IAFa;AAAA,4BASnBC,cATmB;AAAA,4BASHX,IATG;AAAA,4BASGC,KATH;AAAA;AAAA,qBAS0BS,IAAI,CAACE,IAAL,EAT1B;;AAAA;AAAA;AAAA;AASHZ,gBAAAA,IATG;AASGC,gBAAAA,KATH;AASUY,gBAAAA,QATV;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZd,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAYA,MAAMY,cAAc,GAAG,SAAjBA,cAAiB,QAA6B;AAAA,QAA3BX,IAA2B,SAA3BA,IAA2B;AAAA,QAArBC,KAAqB,SAArBA,KAAqB;AAAA,QAAdY,QAAc,SAAdA,QAAc;;AAClD,QAAIA,QAAQ,CAACC,OAAb,EAAsB;AACpBnB,MAAAA,gBAAgB,CAAC;AAAEK,QAAAA,IAAI,EAAJA,IAAF;AAAQC,QAAAA,KAAK,EAALA,KAAR;AAAec,QAAAA,UAAU,EAAEF,QAAQ,CAAChB;AAApC,OAAD,CAAhB;AACD;AACF,GAJD;;AAMA,sBACE,QAAC,cAAD;AAAA,4BACE,QAAC,SAAD;AAAA,8BACE,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAKE,QAAC,OAAD;AAAA,6BACE,QAAC,aAAD;AACE,QAAA,UAAU,EAAC,YADb;AAEE,QAAA,QAAQ,EAAEE;AAFZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YALF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAcD;;GApCuBL,Y;UACPX,S;;;MADOW,Y","sourcesContent":["import { useRouter } from 'next/router'\nimport styled from 'styled-components'\n\nimport ImageContainer from '../Containers/ImageContainer'\nimport Logo from '../Logo'\nimport NameEmailForm from '../NameEmailForm'\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: ${({ theme }) => theme.colors.light};\n`\n\nconst DivForm = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n`\n\nexport default function SecretHeader ({ onAddParticipant }) {\n  const router = useRouter()\n  const { id } = router.query\n\n  const handleSubmit = async ({name, email}) => {\n    const { NEXT_PUBLIC_API_URL } = process.env\n    const data = await fetch(`${NEXT_PUBLIC_API_URL}/secrets/${id}/participants`, {\n      method: 'POST',\n      body: JSON.stringify({\n        name,\n        email\n      })\n    })\n    handleResponse({name, email, response: await data.json()})\n  }\n\n  const handleResponse = ({name, email, response}) => {\n    if (response.success) {\n      onAddParticipant({ name, email, externalId: response.id })\n    }\n  }\n\n  return (\n    <ImageContainer>\n      <Container>\n        <Logo />\n        <p>VocÃª foi convidado para participar deste amigo secreto de Fulano!</p>\n      </Container>\n      <DivForm>\n        <NameEmailForm \n          buttonText=\"Participar\"\n          onSubmit={handleSubmit}\n        />\n      </DivForm>\n    </ImageContainer>\n  )\n}"]},"metadata":{},"sourceType":"module"}