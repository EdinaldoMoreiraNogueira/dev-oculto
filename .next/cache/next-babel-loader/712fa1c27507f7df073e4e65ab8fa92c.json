{"ast":null,"code":"import _regeneratorRuntime from \"/home/acer/Diversos/devweek/dev-oculto/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/acer/Diversos/devweek/dev-oculto/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useRouter } from 'next/router';\nimport styled from 'styled-components';\nimport { RiDeleteBin2Fill } from \"react-icons/ri\";\nvar H4 = styled.h4.withConfig({\n  displayName: \"Participants__H4\",\n  componentId: \"sc-1d35l0n-0\"\n})([\"text-align:center;\"]);\nvar Container = styled.div.withConfig({\n  displayName: \"Participants__Container\",\n  componentId: \"sc-1d35l0n-1\"\n})([\"display:flex;padding:5px 20px;justify-content:center;align-items:center;flex-direction:column;\"]);\nvar ParticipantDiv = styled.div.withConfig({\n  displayName: \"Participants__ParticipantDiv\",\n  componentId: \"sc-1d35l0n-2\"\n})([\"display:flex;align-items:center;\"]);\nvar ParticipantDelete = styled.span.withConfig({\n  displayName: \"Participants__ParticipantDelete\",\n  componentId: \"sc-1d35l0n-3\"\n})([\"color:\", \";cursor:pointer;\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.colors.primary;\n});\n\nvar Participant = function Participant(_ref2) {\n  var name = _ref2.name,\n      email = _ref2.email,\n      showButton = _ref2.showButton,\n      deleteParticipant = _ref2.deleteParticipant;\n  return /*#__PURE__*/_jsxs(ParticipantDiv, {\n    children: [showButton && /*#__PURE__*/_jsx(ParticipantDelete, {\n      onClick: deleteParticipant,\n      children: /*#__PURE__*/_jsx(RiDeleteBin2Fill, {})\n    }), name, \" (\", email, \")\"]\n  });\n};\n\nexport default function Participants(_ref3) {\n  var showButton = _ref3.showButton,\n      participants = _ref3.participants,\n      setParticipants = _ref3.setParticipants;\n  var router = useRouter();\n  var _router$query = router.query,\n      id = _router$query.id,\n      adminKey = _router$query.adminKey;\n\n  var deleteAPIParticipant = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(participantId) {\n      var NEXT_PUBLIC_API_URL;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              NEXT_PUBLIC_API_URL = process.env.NEXT_PUBLIC_API_URL;\n              _context.next = 3;\n              return fetch(\"\".concat(NEXT_PUBLIC_API_URL, \"/secrets/\").concat(id, \"/participants/\").concat(participantId), {\n                method: 'DELETE',\n                headers: new Headers({\n                  'admin-key': adminKey\n                })\n              });\n\n            case 3:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function deleteAPIParticipant(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var _deleteParticipant = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      var _yield$deleteAPIParti, status;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return deleteAPIParticipant(id);\n\n            case 2:\n              _yield$deleteAPIParti = _context2.sent;\n              status = _yield$deleteAPIParti.status;\n              if (status === 204) setParticipants(participants.filter(function (_ref6) {\n                var externalId = _ref6.externalId;\n                return externalId !== id;\n              }));\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function deleteParticipant(_x2) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(H4, {\n      children: \"Participantes: \"\n    }), /*#__PURE__*/_jsxs(Container, {\n      children: [participants.length === 0 && /*#__PURE__*/_jsx(\"p\", {\n        children: \"Nenhum participante cadastrado ainda.\"\n      }), participants.map(function (_ref7, key) {\n        var name = _ref7.name,\n            email = _ref7.email,\n            externalId = _ref7.externalId;\n        return /*#__PURE__*/_jsx(Participant, {\n          name: name,\n          email: email,\n          showButton: showButton,\n          deleteParticipant: function deleteParticipant() {\n            return _deleteParticipant(externalId);\n          }\n        }, \"participant-\".concat(key));\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}